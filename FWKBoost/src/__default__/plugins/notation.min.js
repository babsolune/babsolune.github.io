function Note(t,a,s,e){this.id=t,this.timeout=null,this.notation_scale=a,this.default_note=s,this.already_post=e;var r=this;jQuery("#notation-"+r.id+" .stars").mouseover(function(){clearTimeout(r.timeout),r.timeout=null}),jQuery("#notation-"+r.id+" .stars").mouseout(function(){null==r.timeout&&(r.timeout=window.setTimeout(function(){r.change_picture_status(r.default_note)},50))}),jQuery("#notation-"+r.id+" .stars .star").on("click",function(){var t=this.id.replace(/star-([0-9]+)-([0-9]+)/g,"$2");r.send_request(t)}),jQuery("#notation-"+r.id+" .stars .star").mouseover(function(){var t=this.id.replace(/star-([0-9]+)-([0-9]+)/g,"$2");r.change_picture_status(t)})}Note.prototype={send_request:function(t){var a=this.id,s=this;0==NOTATION_USER_CONNECTED?alert(NOTATION_LANG_AUTH):(jQuery("#notation-"+a+" .stars").after('<i id="loading-'+a+'" class="fa fa-spinner fa-spin"></i>'),jQuery.ajax({url:"",type:"post",data:{note:t,id:a,token:TOKEN},success:function(){jQuery("#loading-"+a).remove(),1==s.already_post?alert(NOTATION_LANG_ALREADY_VOTE):(s.default_note=t,s.already_post=1,s.change_picture_status(t),s.change_nbr_note())}}))},change_picture_status:function(t){for(var a,s,e,r=1;r<=this.notation_scale;r++){var i="star-"+this.id+"-"+r;1>(e=1-(r-t))?e>=.75&&1>e?(a="far star fa-star",s="star-width star-width-75"):e>=.5&&.75>e?(a="far star fa-star",s="star-width star-width-50"):e>=.05&&.5>e?(a="far star fa-star",s="star-width star-width-25"):(a="far star fa-star",s="star-width star-width-0"):(a="far star fa-star",s="star-width star-width-100"),jQuery("#"+i)&&(jQuery("#"+i)[0].className=a,jQuery("#"+i).children(".star-width")[0].className=s)}},change_nbr_note:function(){var t=jQuery("#notation-"+this.id+" span.number-notes").first(),a=parseInt(t.text())+1;t.text(a),jQuery("#notation-"+this.id+" .notes span:not(.number-notes)").text(a>1?NOTATION_LANG_NOTES:NOTATION_LANG_NOTE)}};
