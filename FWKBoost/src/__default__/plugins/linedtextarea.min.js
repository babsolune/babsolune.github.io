!function(e){e.fn.linedtextarea=function(i){var t=e.extend({},e.fn.linedtextarea.defaults,i),n=function(e,i,n){for(;0>=e.height()-i;)n==t.selectedLine?e.append("<div class='lineno lineselect'>"+n+"</div>"):e.append("<div class='lineno'>"+n+"</div>"),n++;return n};return this.each(function(){var i=1,s=e(this);s.attr("wrap","off"),s.css({resize:"none"});s.outerWidth();s.wrap("<div class='linedtextarea'></div>");var d=s.parent().wrap("<div class='linedwrap'></div>").parent();d.prepend("<div class='lines' style='width:50px'></div>");var a=d.find(".lines");d.height(s.height()+6),a.append("<div class='codelines'></div>");var r=a.find(".codelines");if(i=n(r,a.height(),1),-1!=t.selectedLine&&!isNaN(t.selectedLine)){var l=parseInt(s.height()/(i-2)),c=parseInt(l*t.selectedLine)-s.height()/2;s[0].scrollTop=c}a.outerWidth(),d.css("border-left-width"),d.css("border-right-width"),d.css("padding-left"),d.css("padding-right");s.scroll(function(t){var s=e(this)[0],d=s.scrollTop,a=s.clientHeight;r.css({"margin-top":-1*d+"px"}),i=n(r,d+a,i)}),s.resize(function(i){var t=e(this)[0];a.height(t.clientHeight+6)})})},e.fn.linedtextarea.defaults={selectedLine:-1,selectedClass:"lineselect"}}(jQuery);
