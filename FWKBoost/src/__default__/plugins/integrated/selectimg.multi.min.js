jQuery.fn.extend({multipleSelectImg:function(){return this.each(function(){jQuery(this).hide(),jQuery(this).siblings(".general-selector").hide();var e=jQuery(this).children("option"),t=jQuery(this).parent(),s=jQuery("<nav/>",{class:"cssmenu cssmenu-select-multiple cssmenu-vertcal"}).prependTo(t),l=jQuery("<ul/>",{class:"multiple-select-list",role:"listbox"}).appendTo(s);jQuery.each(e,function(){var e=jQuery(this),t=jQuery(this).text(),s=jQuery(this).attr("data-option-img"),i=jQuery(this).attr("data-option-icon"),n=jQuery(this).attr("data-option-class"),a=jQuery(this).val(),r=jQuery(this).attr("selected"),o=jQuery(this).attr("disabled"),d=jQuery("<li/>",{value:a,role:"listbox option"}).appendTo(l),c=jQuery("<a/>").addClass("cssmenu-title").attr("data-name",a).appendTo(d);jQuery("<span/>").text(t).appendTo(c),n&&c.addClass(" "+n),o&&(d.css("cursor","text").addClass("disabled-option"),c.css("pointer-events","none")),r&&d.addClass("selected-option").attr("aria-selected",!0),s&&jQuery("<img/>").attr("src",s).attr("alt",t).prependTo(c),i&&jQuery("<i/>").addClass(i).prependTo(c),c.on("click",function(t){t.preventDefault(),d.toggleClass("selected-option"),e.attr("selected",function(e,t){return"selected"==t?null:"selected"}),d.attr("aria-selected",function(e,t){return"true"!=t||null})})});var i=jQuery(this),n=i.siblings(".select-all"),a=i.siblings(".deselect-all");n.on("click",function(){i.siblings(".cssmenu-select-multiple").find("li:not(.disabled-option)").addClass("selected-option").attr("aria-selected","true"),i.find("option:not([disabled])").attr("selected","selected")}),a.on("click",function(){i.siblings(".cssmenu-select-multiple").find("li:not(.disabled-option)").removeClass("selected-option").attr("aria-selected",null),i.find("option:not([disabled])").attr("selected",null)})})}});
